---
phase: 03-performance-and-accessibility
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - sections/configurator.liquid
autonomous: true
gap_closure: true
requirements:
  - A11Y-01
  - A11Y-04

must_haves:
  truths:
    - "Every step container div has role='group' and aria-labelledby pointing to its title id"
    - "Step titles have id='cfg-step-title-N' for aria-labelledby references"
    - "Locked steps (i > 1) have aria-disabled='true' on initial render"
    - "Locked step bodies have inert attribute on initial render"
    - ".cfg-qty-btn is 44x44px and .cfg-tooltip-btn has min 44x44px touch area"
  artifacts:
    - path: "sections/configurator.liquid"
      provides: "ARIA roles/labels on step markup and WCAG-compliant touch target CSS"
      contains: "role=\"group\""
  key_links:
    - from: "sections/configurator.liquid step divs"
      to: "Screen reader accessibility tree"
      via: "role=group + aria-labelledby provides step context to assistive technology"
      pattern: "aria-labelledby"
    - from: "sections/configurator.liquid CSS"
      to: "WCAG 2.5.5 touch target requirement"
      via: ".cfg-qty-btn 44px and .cfg-tooltip-btn min-width/min-height 44px"
      pattern: "44px"
---

<objective>
Close 2 verification gaps in configurator.liquid: add ARIA group structure to step markup and fix touch target sizes to meet WCAG 2.5.5.

Purpose: The verification report found step divs have no role/aria-labelledby/aria-disabled, step titles have no id, locked steps have no inert on body, and touch targets (.cfg-qty-btn 40px, .cfg-tooltip-btn 20px) are below the 44px minimum. These are the Liquid/CSS gaps blocking A11Y-01 and A11Y-04.
Output: Updated sections/configurator.liquid with ARIA attributes on step markup and corrected CSS touch target sizes.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-performance-and-accessibility/3-RESEARCH.md
@.planning/phases/03-performance-and-accessibility/03-VERIFICATION.md
@sections/configurator.liquid
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add ARIA group structure to step markup and inert on locked step bodies</name>
  <files>sections/configurator.liquid</files>
  <action>
**A11Y-01 — ARIA labels and roles on configurator steps:**

In `sections/configurator.liquid`, find the step loop (line ~235) that renders step containers. The current markup is:
```liquid
<div class="cfg-step{{ locked }}" data-step="{{ i }}">
  <div class="cfg-step__header">
    <span class="cfg-step__badge" aria-hidden="true">{{ i }}</span>
    <h3 class="cfg-step__title">{{ s_title }}</h3>
  </div>
  <p class="cfg-step__subtitle">{{ s_sub }}</p>
  <div class="cfg-step__body">
    {%- comment -%} Content rendered by JS from JSON data {%- endcomment -%}
  </div>
</div>
```

Change it to:
```liquid
<div class="cfg-step{{ locked }}" data-step="{{ i }}"
     role="group"
     aria-labelledby="cfg-step-title-{{ i }}"
     {%- if i > 1 %} aria-disabled="true"{% endif %}>
  <div class="cfg-step__header">
    <span class="cfg-step__badge" aria-hidden="true">{{ i }}</span>
    <h3 class="cfg-step__title" id="cfg-step-title-{{ i }}">{{ s_title }}</h3>
  </div>
  <p class="cfg-step__subtitle">{{ s_sub }}</p>
  <div class="cfg-step__body"{% if i > 1 %} inert{% endif %}>
    {%- comment -%} Content rendered by JS from JSON data {%- endcomment -%}
  </div>
</div>
```

Key changes:
1. `role="group"` on the step container div
2. `aria-labelledby="cfg-step-title-{{ i }}"` on the step container div
3. `aria-disabled="true"` on locked steps (i > 1) — JS will manage this dynamically via _unlockThrough
4. `id="cfg-step-title-{{ i }}"` on the h3 title
5. `inert` attribute on `.cfg-step__body` for locked steps (i > 1) — JS will remove this via _unlockThrough when unlocking

IMPORTANT: Apply `inert` to `.cfg-step__body` only (not the full step div). This keeps the step header (title, badge) readable by screen readers while removing the interactive body content from keyboard tab order and accessibility tree.

Also update the summary step (line ~250) for consistency:
```liquid
<div class="cfg-step" data-step="summary"
     role="group"
     aria-labelledby="cfg-step-title-summary">
  <div class="cfg-step__header">
    <span class="cfg-step__badge" aria-hidden="true">✓</span>
    <h3 class="cfg-step__title" id="cfg-step-title-summary">Your Configuration</h3>
  </div>
  <div data-summary-list></div>
</div>
```
  </action>
  <verify>
Grep configurator.liquid for `role="group"` — should find 16 matches (15 steps + 1 summary).
Grep configurator.liquid for `aria-labelledby="cfg-step-title-` — should find 16 matches.
Grep configurator.liquid for `id="cfg-step-title-` — should find 16 matches (on h3 elements).
Grep configurator.liquid for `aria-disabled="true"` — should find matches for steps 2-15 (14 total on initial render).
Grep configurator.liquid for `inert` on cfg-step__body — should find matches for steps 2-15.
  </verify>
  <done>Every step container has role="group" and aria-labelledby. Step titles have id attributes. Locked steps have aria-disabled="true" and their body has inert on initial render. Screen readers can identify step structure and navigate to step titles even when locked.</done>
</task>

<task type="auto">
  <name>Task 2: Fix touch target sizes for qty and tooltip buttons</name>
  <files>sections/configurator.liquid</files>
  <action>
**A11Y-04 — Touch target sizing:**

In the `{% stylesheet %}` block of `sections/configurator.liquid`:

1. Find `.cfg-qty-btn` (line ~127):
```css
.cfg-qty-btn { width: 40px; height: 40px; ... }
```
Change to:
```css
.cfg-qty-btn { width: 44px; height: 44px; ... }
```
Keep all other properties unchanged. Only change the width and height values from 40px to 44px.

Also update `.cfg-qty-value` line-height from 40px to 44px to match the new button height (line ~129):
```css
.cfg-qty-value { ... line-height: 44px; }
```

2. Find `.cfg-tooltip-btn` (line ~141):
```css
.cfg-tooltip-btn { width: 20px; height: 20px; ... }
```
Add `min-width: 44px; min-height: 44px;` to expand the touch target while keeping the visual circle at 20px. The approach:
```css
.cfg-tooltip-btn { width: 20px; height: 20px; min-width: 44px; min-height: 44px; ... }
```

This preserves the 20px visual appearance (border-radius, icon sizing) while ensuring the interactive hit area meets the 44px WCAG 2.5.5 minimum. The `min-width`/`min-height` will expand the clickable area around the visual button.

Do NOT change any other CSS properties on these selectors — preserve colors, borders, fonts, transitions, etc.
  </action>
  <verify>
Grep configurator.liquid for `.cfg-qty-btn` and verify width/height are 44px.
Grep configurator.liquid for `.cfg-tooltip-btn` and verify min-width/min-height are 44px.
Grep configurator.liquid for `.cfg-qty-value` and verify line-height is 44px.
  </verify>
  <done>.cfg-qty-btn is 44x44px. .cfg-tooltip-btn has min-width/min-height of 44px for WCAG-compliant touch area. .cfg-qty-value line-height matches at 44px.</done>
</task>

</tasks>

<verification>
1. `grep -c 'role="group"' sections/configurator.liquid` returns 16 (15 steps + summary)
2. `grep 'aria-labelledby' sections/configurator.liquid` shows cfg-step-title references
3. `grep 'aria-disabled' sections/configurator.liquid` shows initial locked state
4. `grep 'inert' sections/configurator.liquid` shows inert on locked step bodies
5. `grep 'cfg-qty-btn.*44px' sections/configurator.liquid` shows 44px width/height
6. `grep 'cfg-tooltip-btn.*min-width.*44px' sections/configurator.liquid` shows min 44px
</verification>

<success_criteria>
- Every configurator step has role="group" with aria-labelledby pointing to its title id
- Locked steps have aria-disabled="true" on initial render
- Locked step bodies have inert attribute on initial render
- .cfg-qty-btn is 44x44px
- .cfg-tooltip-btn hit area is at least 44x44px
- No regressions to existing step layout or visual appearance
</success_criteria>

<output>
After completion, create `.planning/phases/03-performance-and-accessibility/03-05-SUMMARY.md`
</output>
